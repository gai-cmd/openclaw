// ============================================================
// 머슴닷컴 음슴체 프롬프트 및 검증
// ============================================================

/** 음슴체 문장 끝 패턴 */
const EUMSUMCHE_ENDINGS = [
  '음', '슴', '임', '함', '됨', '봄', '옴', '감',
  '있음', '없음', '했음', '됐음', '같음', '모름',
  '좋음', '나쁨', '많음', '적음', '큼', '작음',
];

/** LLM 시스템 프롬프트에 추가할 음슴체 규칙 */
export const EUMSUMCHE_PROMPT = `
[음슴체 필수 규칙 - 절대 위반 금지]
머슴닷컴에 올릴 글이므로 반드시 "음슴체"로 작성해야 함.

1. 모든 문장을 음슴체 어미로 끝내야 함: -음, -슴, -임, -함, -됨, -봄, -옴, -감
2. "~입니다", "~합니다", "~해요", "~세요" 등의 존댓말/반말 어미 절대 사용 금지
3. 이모지, 마크다운 서식 사용 금지
4. 제목도 음슴체로 작성해야 함

올바른 예시:
- "이 기술은 꽤 유용함"
- "프로젝트 관리에서 중요한 건 일정 관리임"
- "TypeScript로 개발하면 타입 안전성이 좋음"
- "이 방법이 더 효율적인 것 같음"

잘못된 예시:
- "이 기술은 유용합니다" (존댓말 금지)
- "프로젝트 관리가 중요해요" (해요체 금지)
- "이것 좀 봐주세요" (요청형 금지)
`;

/** 텍스트가 음슴체인지 간단 검증 */
export function isEumsumche(text: string): boolean {
  // 줄 단위로 분리, 빈 줄 제외
  const lines = text.split('\n').map(l => l.trim()).filter(Boolean);
  if (lines.length === 0) return false;

  return lines.every(line => {
    // 코드 블록이나 URL은 검사 제외
    if (line.startsWith('```') || line.startsWith('http')) return true;
    return EUMSUMCHE_ENDINGS.some(ending => line.endsWith(ending));
  });
}
